parameters:

services:
  _defaults:
      autowire: true
      autoconfigure: true

  App\:
      resource: '../src/'

  App\Service\DbConnection:
    arguments:
      $host: '%env(MARIADB_HOST)%'
      $port: '%env(int:MARIADB_PORT)%'
      $database: '%env(MARIADB_DATABASE)%'
      $username: '%env(MARIADB_USER)%'
      $password: '%env(MARIADB_PASSWORD)%'

  Elastic\Elasticsearch\Client:
    factory: ['Elastic\Elasticsearch\ClientBuilder', 'fromConfig']
    arguments:
      - { hosts: ['%env(ELASTICSEARCH_HOST)%:%env(ELASTICSEARCH_PORT)%'] }

  Symfony\Component\Lock\Store\FlockStore:
    arguments:
      - '%env(APP_LOCK_DIR)%'

  Symfony\Component\Lock\LockFactory:
    arguments:
      - '@Symfony\Component\Lock\Store\FlockStore'

when@dev:
  services:
    App\Tests\DataFixtures\:
      resource: '../tests/DataFixtures'
      tags: ['doctrine.fixture.orm']
